<?php

/**
	* Test CRUD of newsitem by anonymous
	*/
class AdfsTestingNewsAnonymousTestCase extends EupcRemoteTestCase {

  public static function getInfo() {
    return array(
      'name' => 'Tests for anonymous user',
      'description' => 'Tests for anonymous news functionality',
      'group' => 'News'
    );
  }

  public function testCreateNews() {
    $this->drupalGet('node/add/news-item');
    $this->assertResponse(403, "Anonymous user can't create news item");

    //Check if block with latest news exists on homepage
    $this->drupalGet('/');
    $this->assertResponse(200, "Anonymous user allowed to see homepage");
    $this->assertRaw('Latest news', 'Block found on homepage');
    $this->assertRaw('<div class="views-row views-row-1 views-row-odd views-row-first">', 'First item found in latest news');
    $this->assertNoRaw('<div class="views-row views-row-4 views-row-odd views-row-first">', 'No more then 3 items found in latest news');

    //overview page
    $this->drupalGet('news');
    $this->assertResponse(200, "Anonymous user see news overview page");
    // News category block found on overview page
    $this->assertRaw('News Category', 'Category block found');

  }

}
